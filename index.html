<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üïµüèª Peaky - Menus</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="banner-container">
                <div class="banner-background"></div>
                <div class="banner-content">
                    <div class="logo-section">
                        <div class="logo-icon"><img src="https://i.ibb.co/7JnxH5L8/erasebg-transformed-6-1.png" alt="Logo" class="logo-img" referrerpolicy="no-referrer" onerror="this.src='https://via.placeholder.com/56x56.png?text=Logo'" /></div>
                        <h1 class="brand-name">CHEZ PEAKY</h1>
                        <div class="brand-tagline">Notre Menus 2026</div>
                    </div>
                    <div class="user-section">
                        <p id="user-info" class="user-welcome">Chargement...</p>
                    </div>
                </div>
                <div class="banner-overlay"></div>

            </div>
        </header>
        
        <!-- Panier -->
        <div class="cart-summary" id="cart-summary" style="display: none;">
            <div class="cart-header">
                <h3>üõí Votre commande</h3>
                <span class="cart-total" id="cart-total">0.00‚Ç¨</span>
            </div>
            <div class="cart-items" id="cart-items"></div>
            <div class="cart-actions">
                <button class="btn btn-clear" id="clear-cart-btn" onclick="clearCart()">üóëÔ∏è Vider</button>
                <button class="btn btn-success" id="checkout-btn">üì§ Commander</button>
            </div>
        </div>
        
        <!-- Navigation des cat√©gories -->
        <nav class="category-nav">
            <!-- Les boutons seront g√©n√©r√©s dynamiquement par JavaScript -->
        </nav>
        
        <main>
            
            <!-- Menu des produits -->
            <div class="menu-grid" id="menu-grid">
                <!-- Les produits seront g√©n√©r√©s dynamiquement -->
            </div>
        </main>
        
        <!-- Page de d√©tail produit -->
        <div class="product-detail-page" id="product-detail-page" style="display: none;">
            <div class="product-detail-content">
                <button class="back-btn" onclick="closeProductDetail()">‚Üê Retour</button>
                <div class="product-detail-header">
                    <div class="product-detail-image">
                        <img id="detail-product-img" src="" alt="" class="detail-img">
                        <div id="detail-product-emoji" class="detail-emoji" style="display: none;"></div>
                    </div>
                    <div class="product-detail-info">
                        <h2 id="detail-product-name"></h2>
                        <p id="detail-product-description"></p>
                        <div class="detail-price-section">
                            <div class="quantity-selector">
                                <h4>Choisissez votre quantit√© :</h4>
                                <div class="quantity-bubbles">
                                    <div class="quantity-bubble" data-qty="1" onclick="addToCartWithQuantity(currentProductId, 1)">
                                        <span class="bubble-qty">1g</span>
                                        <span class="bubble-price" id="price-1"></span>
                                    </div>
                                    <div class="quantity-bubble" data-qty="2" onclick="addToCartWithQuantity(currentProductId, 2)">
                                        <span class="bubble-qty">2g</span>
                                        <span class="bubble-price" id="price-2"></span>
                                    </div>
                                    <div class="quantity-bubble" data-qty="5" onclick="addToCartWithQuantity(currentProductId, 5)">
                                        <span class="bubble-qty">5g</span>
                                        <span class="bubble-price" id="price-5"></span>
                                    </div>
                                    <div class="quantity-bubble" data-qty="10" onclick="addToCartWithQuantity(currentProductId, 10)">
                                        <span class="bubble-qty">10g</span>
                                        <span class="bubble-price" id="price-10"></span>
                                    </div>
                                    <div class="quantity-bubble" data-qty="25" onclick="addToCartWithQuantity(currentProductId, 25)">
                                        <span class="bubble-qty">25g</span>
                                        <span class="bubble-price" id="price-25"></span>
                                    </div>
                                    <div class="quantity-bubble" data-qty="50" onclick="addToCartWithQuantity(currentProductId, 50)">
                                        <span class="bubble-qty">50g</span>
                                        <span class="bubble-price" id="price-50"></span>
                                    </div>
                                    <div class="quantity-bubble" data-qty="100" onclick="addToCartWithQuantity(currentProductId, 100)">
                                        <span class="bubble-qty">100g</span>
                                        <span class="bubble-price" id="price-100"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="product-video-section">
                    <h3>üé• Pr√©sentation du produit</h3>
                    <div class="video-container">
                        <video id="product-video" controls preload="metadata" poster="">
                            <source id="video-source" src="" type="video/mp4">
                            Votre navigateur ne supporte pas la lecture de vid√©os.
                        </video>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page d'informations -->
        <div class="info-page" id="info-page" style="display: none;">
            <div class="info-content">
                <h2>üìã Informations</h2>
                
                <div class="info-section">
                    <h3>üöö Livraison</h3>
                    <p><strong>Horaires :</strong> 9H - 00H </p>
                    <p><strong>D√©lai :</strong> 30-45 minutes</p>
                    <p><strong>Minimum :</strong> √† partir de 50‚Ç¨ (54) & 100‚Ç¨ alentours</p>
                    <p><strong>Zone :</strong> 54 / 88 / 55 / 52 selon commande</p>
                    <p><strong>Livraison :</strong> ENVOIE DANS TOUTES LA FRANCE, SUISSE, BELGIQUE</p>
                </div>
                
                <div class="info-section">
                    <h3>üìû Contact</h3>
                    <p><strong>Snapchat :</strong> PAS DISPONIBLE</p>
                    <p><strong>Telegram :</strong> @peakyblinders540</p>
                </div>
                
                <div class="info-section">
                    <h3>üí≥ Paiement</h3>
                    <p><strong>Modes accept√©s :</strong> Esp√®ces uniquement</p>
                    <p><strong>Modes accept√©s livraisons :</strong> Virement instant, Crypto</p>
                </div>
            </div>
        </div>

        <!-- Page Admin -->
        <div class="admin-page" id="admin-page" style="display: none;">
            <div class="admin-content">
                <h2>‚öôÔ∏è Panel Admin</h2>
                
                <!-- Navigation Admin -->
                <div class="admin-nav-tabs">
                    <button class="admin-tab active" data-tab="products">üì¶ Produits</button>
                    <button class="admin-tab" data-tab="categories">üìÅ Cat√©gories</button>
                    <button class="admin-tab" data-tab="settings">‚öôÔ∏è Param√®tres</button>
                </div>

                <!-- Section Produits -->
                <div class="admin-section" id="admin-products">
                    <div class="admin-section-header">
                        <h3>üì¶ Gestion des Produits</h3>
                        <button class="btn btn-success" onclick="openAddProductModal()">+ Ajouter</button>
                    </div>
                    <div class="admin-list" id="products-list"></div>
                </div>

                <!-- Section Cat√©gories -->
                <div class="admin-section" id="admin-categories" style="display: none;">
                    <div class="admin-section-header">
                        <h3>üìÅ Gestion des Cat√©gories</h3>
                        <button class="btn btn-success" onclick="openAddCategoryModal()">+ Ajouter</button>
                    </div>
                    <div class="admin-list" id="categories-list"></div>
                </div>

                <!-- Section Param√®tres -->
                <div class="admin-section" id="admin-settings" style="display: none;">
                    <h3>‚öôÔ∏è Param√®tres</h3>
                    
                    <div class="admin-form">
                        <div class="form-group">
                            <label>Username Telegram</label>
                            <input type="text" id="admin-telegram-username" placeholder="LEMIEL54">
                        </div>
                        <div class="form-group">
                            <label>Lien du Canal</label>
                            <input type="text" id="admin-channel-link" placeholder="https://t.me/...">
                        </div>
                        <button type="button" id="admin-save-settings-btn" class="btn btn-success" onclick="saveAdminSettings()">üíæ Sauvegarder</button>
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h4>üë• Administrateurs</h4>
                            <button class="admin-btn admin-btn-edit" onclick="openAddAdminModal()">‚ûï Ajouter</button>
                        </div>
                        <div id="admins-list"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Barre de navigation en bas -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-page="menu">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">Menu</span>
            </button>
            <button class="nav-item" data-page="info">
                <span class="nav-icon">‚ÑπÔ∏è</span>
                <span class="nav-label">Infos</span>
            </button>
            <button class="nav-item" data-page="canal">
                <span class="nav-icon">‚úàÔ∏è</span>
                <span class="nav-label">Canal</span>
            </button>
            <button class="nav-item" data-page="contact">
                <span class="nav-icon">‚úâÔ∏è</span>
                <span class="nav-label">Contact</span>
            </button>
            <button class="nav-item admin-nav-item" data-page="admin" style="display: none;">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span class="nav-label">Admin</span>
            </button>
        </nav>
    </div>
    
    <script src="script.js"></script>
    <!-- Modal pour choisir le type de commande -->
    <div id="order-type-modal" class="order-type-modal">
        <div class="order-type-modal-content">
            <div class="order-type-modal-header">
                <h3>üì¶ Type de commande</h3>
            </div>
            <div class="order-type-modal-body">
                <p class="order-type-description">Comment souhaitez-vous r√©cup√©rer votre commande ?</p>
                <div class="order-type-buttons">
                    <button id="pickup-btn" class="order-type-btn pickup-btn">
                        <span class="btn-emoji">üè™</span>
                        <span class="btn-text">Sur place</span>
                    </button>
                    <button id="delivery-btn" class="order-type-btn delivery-btn">
                        <span class="btn-emoji">üöö</span>
                        <span class="btn-text">Livraison</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal pour l'heure d'arriv√©e (Sur place) -->
    <div id="arrival-time-modal" class="arrival-time-modal">
        <div class="arrival-time-modal-content">
            <div class="arrival-time-modal-header">
                <h3>üïê Heure d'arriv√©e</h3>
            </div>
            <div class="arrival-time-modal-body">
                <div class="time-input-group">
                    <label for="arrival-time-input">√Ä quelle heure souhaitez-vous arriver ?</label>
                    <input type="time" id="arrival-time-input" class="time-input">
                </div>
            </div>
            <div class="arrival-time-modal-footer">
                <button id="cancel-time" class="btn-cancel">‚ùå Annuler</button>
                <button id="confirm-time" class="btn-confirm">‚úÖ Confirmer</button>
            </div>
        </div>
    </div>

    <!-- Ajouter cette modal avant la fermeture du body -->
    <div id="address-modal" class="address-modal">
        <div class="address-modal-content">
            <div class="address-modal-header">
                <h3>üìç Adresse de livraison</h3>
            </div>
            <div class="address-modal-body">
                <div class="address-input-group">
                    <label for="address-input">O√π souhaitez-vous √™tre livr√© ?</label>
                    <textarea id="address-input" placeholder="Entrez votre adresse compl√®te...&#10;Ex: 123 Rue de la Paix, 75001 Paris" rows="3"></textarea>
                </div>
            </div>
            <div class="address-modal-footer">
                <button id="cancel-address" class="btn-cancel">‚ùå Annuler</button>
                <button id="confirm-address" class="btn-confirm">‚úÖ Confirmer</button>
            </div>
        </div>
    </div>

    <!-- Modal Produit -->
    <div id="product-modal" class="admin-modal" style="display: none;">
        <div class="admin-modal-content">
            <div class="admin-modal-header">
                <h3 id="product-modal-title">Ajouter un Produit</h3>
            </div>
            <div class="admin-modal-body">
                <div class="form-group">
                    <label>Nom</label>
                    <input type="text" id="product-name" placeholder="Nom du produit">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="product-description" placeholder="Description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Prix de base (‚Ç¨)</label>
                    <input type="number" id="product-price" step="0.01" placeholder="10.00">
                </div>
                <div class="form-group">
                    <label>Emoji</label>
                    <input type="text" id="product-emoji" placeholder="üçï">
                </div>
                <div class="form-group">
                    <label>Image URL</label>
                    <input type="text" id="product-image" placeholder="https://...">
                </div>
                <div class="form-group">
                    <label>Vid√©o URL</label>
                    <input type="text" id="product-video-url" placeholder="https://...">
                </div>
                <div class="form-group">
                    <label>Cat√©gorie</label>
                    <div class="custom-select-wrapper">
                        <div class="custom-select" id="product-category-select">
                            <div class="custom-select-trigger">
                                <span id="product-category-display">-- S√©lectionner une cat√©gorie --</span>
                                <span class="custom-select-arrow">‚ñº</span>
                            </div>
                            <div class="custom-select-options" id="product-category-options" style="display: none;">
                            </div>
                        </div>
                        <select id="product-category" style="display: none;"></select>
                    </div>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="product-isNew"> Nouveau
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="product-isPromo"> Promo
                    </label>
                </div>
                <div class="form-group">
                    <label>Prix personnalis√©s (format: quantit√©=prix, s√©par√©s par des virgules)</label>
                    <input type="text" id="product-custom-prices" placeholder="1=10, 2=18, 5=40">
                </div>
            </div>
            <div class="admin-modal-footer">
                <button class="btn-cancel" onclick="closeProductModal()">‚ùå Annuler</button>
                <button class="btn-confirm" onclick="saveProduct()">‚úÖ Sauvegarder</button>
            </div>
        </div>
    </div>

    <!-- Modal Admin -->
    <div id="admin-modal" class="admin-modal" style="display: none;">
        <div class="admin-modal-content">
            <div class="admin-modal-header">
                <h3 id="admin-modal-title">Ajouter un Administrateur</h3>
            </div>
            <div class="admin-modal-body">
                <div class="form-group">
                    <label>Username Telegram (sans @)</label>
                    <input type="text" id="admin-username-input" placeholder="username">
                </div>
            </div>
            <div class="admin-modal-footer">
                <button class="btn-cancel" onclick="closeAdminModal()">‚ùå Annuler</button>
                <button class="btn-confirm" onclick="saveAdmin()">‚úÖ Sauvegarder</button>
            </div>
        </div>
    </div>

    <!-- Modal Cat√©gorie -->
    <div id="category-modal" class="admin-modal" style="display: none;">
        <div class="admin-modal-content">
            <div class="admin-modal-header">
                <h3 id="category-modal-title">Ajouter une Cat√©gorie</h3>
            </div>
            <div class="admin-modal-body">
                <div class="form-group">
                    <label>ID (cl√© technique, ex: pizza)</label>
                    <input type="text" id="category-id" placeholder="pizza">
                </div>
                <div class="form-group">
                    <label>Nom</label>
                    <input type="text" id="category-name" placeholder="Hash">
                </div>
                <div class="form-group">
                    <label>Emoji</label>
                    <input type="text" id="category-emoji" placeholder="üç´">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="category-description" placeholder="Description" rows="3"></textarea>
                </div>
            </div>
            <div class="admin-modal-footer">
                <button class="btn-cancel" onclick="closeCategoryModal()">‚ùå Annuler</button>
                <button class="btn-confirm" onclick="saveCategory()">‚úÖ Sauvegarder</button>
            </div>
        </div>
    </div>
</body>
</html>